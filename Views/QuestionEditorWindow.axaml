<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="using:FluentAvalonia.UI.Controls"
        x:Class="StadiumCompany.Views.QuestionEditorWindow"
        Title="Nouvelle question"
        Width="750" Height="580"
        MinWidth="650" MinHeight="500"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource AppBackgroundAltBrush}">

    <Grid Margin="28,22">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="12">
            <ui:SymbolIcon Symbol="Help"
                           FontSize="22"
                           Foreground="{DynamicResource AccentBrush}"/>
            <TextBlock x:Name="TitleText"
                       Text="Nouvelle question"
                       FontSize="20"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimaryBrush}"
                       VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Question text in a card -->
        <Border Grid.Row="1"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="12"
                Padding="20,18"
                Margin="0,18,0,0">
            <StackPanel Spacing="6">
                <TextBlock Text="Question" FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
                <TextBox x:Name="TxtLabel"
                         Watermark="Saisissez la question..."
                         Height="44"
                         CornerRadius="8"/>
            </StackPanel>
        </Border>

        <!-- Answer type -->
        <Border Grid.Row="2"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="12"
                Padding="20,18"
                Margin="0,12,0,0">
            <StackPanel Spacing="6">
                <TextBlock Text="Type de reponse" FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
                <ComboBox x:Name="CmbType"
                          Width="220"
                          Height="40"
                          CornerRadius="8"
                          HorizontalAlignment="Left"
                          SelectionChanged="CmbType_SelectionChanged">
                    <ComboBoxItem Content="Vrai/Faux"/>
                    <ComboBoxItem Content="Choix multiples"/>
                </ComboBox>
            </StackPanel>
        </Border>

        <!-- True/False panel -->
        <Border x:Name="PnlTrueFalse"
                Grid.Row="3"
                Margin="0,12,0,0"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="12"
                Padding="20,18"
                IsVisible="True">
            <StackPanel Spacing="12">
                <TextBlock Text="Quelle est la bonne reponse ?" FontSize="14" FontWeight="Medium" Foreground="{DynamicResource TextPrimaryAltBrush}"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="20" VerticalAlignment="Center">
                        <RadioButton x:Name="RbTrue" Content="Vrai" GroupName="TrueFalse" IsChecked="True" FontSize="14"/>
                        <RadioButton x:Name="RbFalse" Content="Faux" GroupName="TrueFalse" FontSize="14"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Spacing="6">
                        <TextBlock x:Name="LblTfWeight" Text="Points" FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
                        <NumericUpDown x:Name="NumTfWeight"
                                       Width="130"
                                       Minimum="0"
                                       Maximum="100"
                                       Increment="0.01"
                                       FormatString="F2"
                                       Value="1"
                                       HorizontalAlignment="Left"/>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Border>

        <!-- Answers panel (for multiple choice) -->
        <Border x:Name="PnlAnswers"
                Grid.Row="3"
                Margin="0,12,0,0"
                Background="{DynamicResource CardBackgroundBrush}"
                CornerRadius="12"
                Padding="20,18"
                IsVisible="False">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="0,0,0,14">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <ui:SymbolIcon Symbol="Comment" FontSize="16" Foreground="{DynamicResource TextTertiaryBrush}"/>
                        <TextBlock Text="Reponses possibles"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Foreground="{DynamicResource TextSecondaryBrush}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                    <StackPanel HorizontalAlignment="Right" Orientation="Horizontal" Spacing="8">
                        <Button x:Name="BtnDistribute"
                                Padding="12,6"
                                CornerRadius="6"
                                Click="BtnDistribute_Click">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <ui:SymbolIcon Symbol="Sync" FontSize="12"/>
                                <TextBlock Text="Distribuer les points"/>
                            </StackPanel>
                        </Button>
                        <Button x:Name="BtnAddAnswer"
                                Padding="12,6"
                                CornerRadius="6"
                                Classes="accent"
                                Click="BtnAddAnswer_Click">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <ui:SymbolIcon Symbol="Add" FontSize="12"/>
                                <TextBlock Text="Ajouter"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>

                <Border Grid.Row="1"
                        CornerRadius="8"
                        ClipToBounds="True"
                        BorderBrush="{DynamicResource BorderSubtleBrush}"
                        BorderThickness="1">
                    <DataGrid x:Name="DgvAnswers"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              GridLinesVisibility="Horizontal"
                              Background="Transparent"
                              BorderThickness="0"
                              DoubleTapped="DgvAnswers_DoubleTapped">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Reponse" Binding="{Binding Label}" Width="2*"/>
                            <DataGridTextColumn Header="Correcte" Binding="{Binding IsCorrectText}" Width="80"/>
                            <DataGridTextColumn Header="Poids" Binding="{Binding Weight}" Width="70"/>
                        </DataGrid.Columns>
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Editer" Click="ContextMenu_Edit">
                                    <MenuItem.Icon>
                                        <ui:SymbolIcon Symbol="Edit" FontSize="14"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Supprimer" Click="ContextMenu_Delete">
                                    <MenuItem.Icon>
                                        <ui:SymbolIcon Symbol="Delete" FontSize="14"/>
                                    </MenuItem.Icon>
                                </MenuItem>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                    </DataGrid>
                </Border>
            </Grid>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="4"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,18,0,0"
                    Spacing="12">
            <Button Content="Annuler"
                    Padding="24,10"
                    CornerRadius="8"
                    Click="BtnCancel_Click"/>
            <Button Content="Enregistrer"
                    Padding="24,10"
                    CornerRadius="8"
                    FontWeight="SemiBold"
                    Classes="accent"
                    Click="BtnSave_Click"/>
        </StackPanel>

    </Grid>

</Window>
